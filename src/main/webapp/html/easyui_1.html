<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>注册用户</title>
<link rel="stylesheet" type="text/css" href="../static/jqeasyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="../static/jqeasyui/themes/icon.css">
<script src="../static/js/jquery-1.11.1.min.js"></script>
<script src="../static/jqeasyui/jquery.easyui.min.js"></script>
<script src="../static/jqeasyui/locale/easyui-lang-zh_CN.js"></script>
<script src="../static/js/common.js"></script>

<style>
</style>
</head>
<body>

<div id="error_dialog" title="错误信息">
<ul id="err_list" style="display:none;padding:3px;word-break:break-all;word-wrap:break-word;line-height:18px;color:red;"></ul>
</div>



<table id="user_data_table"></table>  


<script>
function parseModel(model){
	var d = {};
	d.total = model.page.total;
	d.rows  = model.page.datas;
	TXWEB.tb.datagrid("options").records=d.total;
	return d;
};

var TXWEB={};
	TXWEB.tb = $('#user_data_table');

	TXWEB.tb.datagrid({
	method:'get',
    title: '用户信息列表',  
    iconCls: 'icon-save',
    columns:[[
    {field:'id',title:'ID 编号',},
    {field:'name',title:'用户名',width:100},
    {field:'tel',title:'电话号码',width:100}
    ]],
    idField: 'id',
    width: 500,  
    height: 350,
    nowrap: false,  
    striped: true, 
    pagination: true,  
    rownumbers: true,
    singleSelect: false,  
    remoteSort:false,
    fitColumns:true,
    showFooter:true,
    sortName: 'id',  
    sortOrder: 'asc', 
    pageSize:5,
    pageList:[5,10,20,50],
    records:0,
    toolbar: [{  
        text: '添加',  
        iconCls: 'icon-add',  
        handler: function() {  
        alert('添加数据');
        }  
    }, '-', {  
        text: '保存',  
        iconCls: 'icon-save',  
        handler: function() {  
        alert('保存数据'); 
        }  
    }],
    onBeforeLoad:function(){

    },
    loader:function(param, succCall, err){
    	var opts = TXWEB.tb.datagrid("options");
    	var pgno = param.page;
    	var ls = param.rows;
    	var cr = (pgno-1) * ls ;
    	var params = $.extend({crow:cr, listSize:ls, records:opts.records, sord:opts.sortOrder, sidx:opts.sortName}, 
    			param);
    		$.ajax({
    			type : opts.method,
    			url : '/txcms-web/user/info/search.json',
    			data : params,
    			dataType : "json",
    			success : function (model) {
    				succCall(parseModel(model));
    			},
    			error:function(xhr, ts){
    				err();
    			}
    		});
    }
});
	
$(document).ajaxError(onGlobalAjaxError);
</script>








</body>
</html>